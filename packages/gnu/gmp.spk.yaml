pkg: gmp/6.2.0

sources:
  - tar: http://ftpmirror.gnu.org/gnu/gmp/gmp-6.2.0.tar.xz

build:
  options:
    - var: arch
    - var: os
    - var: distro
    - var: centos
    - pkg: stdfs
    - pkg: make
    - pkg: gcc
    - pkg: coreutils
    - pkg: sed
    - pkg: grep
    - pkg: gawk
  script:
    - export PATH=/spfs/bin
    - export LD_LIBRARY_PATH=/spfs/bin
    - cd gmp-6.2.0
    - ./configure
      --prefix=/spfs
      --with-sysroot=/spfs
    - make -j$(nproc)
    - make check
    - make install
    # no need to keep these extra files around
    - rm -r /spfs/share/info

tests:
  - stage: install
    script:
      - ldd /spfs/lib/libgmp.so

install:
  requirements:
    - pkg: stdfs
