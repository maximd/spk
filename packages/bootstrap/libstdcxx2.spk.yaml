pkg: libstdcxx/3

sources:
  - tar: http://ftpmirror.gnu.org/gnu/gcc/gcc-10.2.0/gcc-10.2.0.tar.xz

build:
  options:
    - var: bootstrap/no
    - var: target/x86_64-pc-linux-gnu
    - pkg: gcc
    - pkg: stdfs
      inheritance: Strong
    - pkg: binutils
      inheritance: Strong
    - pkg: glibc
      inheritance: Strong
    - pkg: coreutils
    - pkg: sed
    - pkg: make
    - pkg: grep
    - pkg: gawk
    - pkg: diffutils
  script:
    - export PATH=/spfs/bin
    - cd gcc-10.2.0
    - mkdir -p build; cd build
    - ../libstdc++-v3/configure
      CXXFLAGS="-g -O2 -D_GNU_SOURCE"
      --host=$SPK_OPT_target
      --build=$(../config.guess)
      --prefix=/spfs
      --with-sysroot=/spfs
      --with-local-prefix=/spfs
      --disable-multilib
      --disable-nls
      --disable-libstdcxx-pch
    - make -j$(nproc)
    - make install

install:
  requirements:
    - pkg: stdfs
